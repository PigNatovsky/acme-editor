# to update:
# cat $HOME/lib/plumbing $PLAN9/plumb/initial.plumbing | 9p write plumb/rules

# open bib reference file
type is text
data matches '\\cite{([a-z]*\-[0-9][0-9][0-9][0-9]\-[a-z]*)}'
plumb to edit
arg isfile /Users/jinyang/onedrive/bibliography/references.bib
data set /Users/jinyang/onedrive/bibliography/references.bib
attr add addr=/$1
plumb client $editor

# open the bib pdf, this rule must after the bib reference file rule
type is text
data matches '@[a-zA-Z]*{([a-z]*\-[0-9][0-9][0-9][0-9]\-[a-z]*)'
plumb to postscript
arg isdir /Users/jinyang/onedrive/bibliography/bib-pdfs/
arg isfile /Users/jinyang/onedrive/bibliography/bib-pdfs/$1.pdf
plumb start open $file

# open pdf with `open`
type is text
data matches '[a-zA-Z¡-￿0-9_\-./]+'
data matches '([a-zA-Z¡-￿0-9_\-./]+)\.(ps|PS|eps|EPS|pdf|PDF|dvi|DVI)'
arg isfile	$0
plumb to postscript
plumb start open $file

# show git log
type is text
data matches 'commit ([a-z0-9]*)'
plumb start bash -c 'cd /tmp/acme.git.log; git show $1 >> /mnt/acme/new/body'

